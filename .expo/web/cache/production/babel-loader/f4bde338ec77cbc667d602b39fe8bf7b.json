{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function _createSuper(Derived){return function(){var Super=_getPrototypeOf(Derived),result;if(_isNativeReflectConstruct()){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import React,{Component}from'react';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import TextInput from\"react-native-web/dist/exports/TextInput\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import Alert from\"react-native-web/dist/exports/Alert\";import Modal from\"react-native-web/dist/exports/Modal\";import KeyboardAvoidingView from\"react-native-web/dist/exports/KeyboardAvoidingView\";import ScrollView from\"react-native-web/dist/exports/ScrollView\";import Image from\"react-native-web/dist/exports/Image\";import{ListItem}from'react-native-elements';import firebase from'firebase';import{RFValue}from'react-native-responsive-fontsize';import db from\"../config\";import MyHeader from\"../components/MyHeader\";var BookDonateScreen=function(_Component){_inherits(BookDonateScreen,_Component);var _super=_createSuper(BookDonateScreen);function BookDonateScreen(){var _this;_classCallCheck(this,BookDonateScreen);_this=_super.call(this);_this.getRequestedBooksList=function(){_this.requestRef=db.collection(\"requested_books\").onSnapshot(function(snapshot){var requestedBooksList=snapshot.docs.map(function(doc){return doc.data();});_this.setState({requestedBooksList:requestedBooksList});});};_this.keyExtractor=function(item,index){return index.toString();};_this.renderItem=function(_ref){var item=_ref.item,i=_ref.i;return React.createElement(ListItem,{key:i,title:item.book_name,subtitle:item.reason_to_request,titleStyle:{color:'black',fontWeight:'bold'},leftElement:React.createElement(Image,{style:{width:50,height:50},source:{uri:item.image_link}}),rightElement:React.createElement(TouchableOpacity,{style:styles.button,onPress:function onPress(){_this.props.navigation.navigate(\"ReceiverDetails\",{\"details\":item});}},React.createElement(Text,{style:{color:'#ffff'}},\"View\")),bottomDivider:true});};_this.state={userID:firebase.auth().currentUser.email,requestedBookList:[]};_this.requestRef=null;return _this;}_createClass(BookDonateScreen,[{key:\"componentDidMount\",value:function componentDidMount(){this.getRequestedBooksList();}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.requestRef();}},{key:\"render\",value:function render(){return React.createElement(View,{style:{flex:1}},React.createElement(MyHeader,{title:\"Donate Books\",navigation:this.props.navigate}),React.createElement(View,{style:{flex:1}},this.state.requestedBookList.length===0?React.createElement(View,{style:styles.subContainer},React.createElement(Text,{style:{fontSize:20}},\"List of all requested books\")):React.createElement(FlatList,{keyExtractor:this.keyExtractor,data:this.state.requestedBookList,renderItem:this.state.renderItem})));}}]);return BookDonateScreen;}(Component);export{BookDonateScreen as default};var styles=StyleSheet.create({subContainer:{flex:1,fontSize:20,justifyContent:'center',alignItems:'center'},button:{width:100,height:30,justifyContent:'center',alignItems:'center',backgroundColor:\"#ff5722\",shadowColor:\"#000\",shadowOffset:{width:0,height:8}}});","map":{"version":3,"sources":["C:/Users/aines/Desktop/book-santa-stage-11-master/screens/BookDonateScreen.js"],"names":["React","Component","ListItem","firebase","RFValue","db","MyHeader","BookDonateScreen","getRequestedBooksList","requestRef","collection","onSnapshot","snapshot","requestedBooksList","docs","map","doc","data","setState","keyExtractor","item","index","toString","renderItem","i","book_name","reason_to_request","color","fontWeight","width","height","uri","image_link","styles","button","props","navigation","navigate","state","userID","auth","currentUser","email","requestedBookList","flex","length","subContainer","fontSize","StyleSheet","create","justifyContent","alignItems","backgroundColor","shadowColor","shadowOffset"],"mappings":"m7BAAA,MAAQA,CAAAA,KAAR,EAAgBC,SAAhB,KAAgC,OAAhC,C,knBAEA,OAAQC,QAAR,KAAuB,uBAAvB,CACA,MAAOC,CAAAA,QAAP,KAAqB,UAArB,CACA,OAAQC,OAAR,KAAsB,kCAAtB,CACA,MAAOC,CAAAA,EAAP,iBACA,MAAOC,CAAAA,QAAP,8B,GAEqBC,CAAAA,gB,uGACjB,2BAAa,kDACT,wBADS,MAWbC,qBAXa,CAWU,UAAI,CACvB,MAAKC,UAAL,CAAkBJ,EAAE,CAACK,UAAH,CAAc,iBAAd,EACjBC,UADiB,CACN,SAACC,QAAD,CAAY,CACtB,GAAIC,CAAAA,kBAAkB,CAAGD,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkB,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACC,IAAJ,EAAT,EAAlB,CAAzB,CACA,MAAKC,QAAL,CAAc,CACZL,kBAAkB,CAAGA,kBADT,CAAd,EAGD,CANiB,CAAlB,CAOD,CAnBU,OA8BXM,YA9BW,CA8BI,SAACC,IAAD,CAAOC,KAAP,QAAiBA,CAAAA,KAAK,CAACC,QAAN,EAAjB,EA9BJ,OAgCXC,UAhCW,CAgCE,cAAgB,IAAbH,CAAAA,IAAa,MAAbA,IAAa,CAAPI,CAAO,MAAPA,CAAO,CAC3B,MACE,qBAAC,QAAD,EACE,GAAG,CAAEA,CADP,CAEE,KAAK,CAAEJ,IAAI,CAACK,SAFd,CAGE,QAAQ,CAAEL,IAAI,CAACM,iBAHjB,CAIE,UAAU,CAAE,CAAEC,KAAK,CAAE,OAAT,CAAkBC,UAAU,CAAE,MAA9B,CAJd,CAKE,WAAW,CAAE,oBAAC,KAAD,EAAO,KAAK,CAAE,CAACC,KAAK,CAAC,EAAP,CAAUC,MAAM,CAAC,EAAjB,CAAd,CACI,MAAM,CAAE,CAACC,GAAG,CAACX,IAAI,CAACY,UAAV,CADZ,EALf,CAOE,YAAY,CACR,oBAAC,gBAAD,EAAkB,KAAK,CAAEC,MAAM,CAACC,MAAhC,CACmB,OAAO,CAAE,kBAAI,CACX,MAAKC,KAAL,CAAWC,UAAX,CAAsBC,QAAtB,CAA+B,iBAA/B,CAAiD,CAAC,UAAUjB,IAAX,CAAjD,EACD,CAHpB,EAIE,oBAAC,IAAD,EAAM,KAAK,CAAE,CAACO,KAAK,CAAC,OAAP,CAAb,SAJF,CARN,CAeE,aAAa,KAff,EADF,CAmBD,CApDU,CAEL,MAAKW,KAAL,CAAW,CACTC,MAAM,CAACpC,QAAQ,CAACqC,IAAT,GAAgBC,WAAhB,CAA4BC,KAD1B,CAEPC,iBAAiB,CAAC,EAFX,CAAX,CAMJ,MAAKlC,UAAL,CAAgB,IAAhB,CARS,aASZ,C,0FAYoB,CACjB,KAAKD,qBAAL,GACD,C,mEAEqB,CACpB,KAAKC,UAAL,GACD,C,uCA0BK,CACJ,MACI,qBAAC,IAAD,EAAM,KAAK,CAAE,CAACmC,IAAI,CAAC,CAAN,CAAb,EACE,oBAAC,QAAD,EAAU,KAAK,CAAC,cAAhB,CAA+B,UAAU,CAAE,KAAKT,KAAL,CAAWE,QAAtD,EADF,CAEE,oBAAC,IAAD,EAAM,KAAK,CAAE,CAACO,IAAI,CAAC,CAAN,CAAb,EACG,KAAKN,KAAL,CAAWK,iBAAX,CAA6BE,MAA7B,GAAwC,CAAxC,CACA,oBAAC,IAAD,EAAM,KAAK,CAAEZ,MAAM,CAACa,YAApB,EACqB,oBAAC,IAAD,EAAM,KAAK,CAAE,CAACC,QAAQ,CAAC,EAAV,CAAb,gCADrB,CADA,CAOA,oBAAC,QAAD,EAAU,YAAY,CAAE,KAAK5B,YAA7B,CACS,IAAI,CAAE,KAAKmB,KAAL,CAAWK,iBAD1B,CAES,UAAU,CAAE,KAAKL,KAAL,CAAWf,UAFhC,EARH,CAFF,CADJ,CAmBH,C,8BA1EyCtB,S,SAAzBM,gB,aA4ErB,GAAM0B,CAAAA,MAAM,CAAGe,UAAU,CAACC,MAAX,CAAkB,CAC9BH,YAAY,CAAC,CAAEF,IAAI,CAAC,CAAP,CACXG,QAAQ,CAAE,EADC,CAEVG,cAAc,CAAC,QAFL,CAGTC,UAAU,CAAC,QAHF,CADiB,CAM1BjB,MAAM,CAAC,CACJL,KAAK,CAAC,GADF,CAEHC,MAAM,CAAC,EAFJ,CAGFoB,cAAc,CAAC,QAHb,CAIDC,UAAU,CAAC,QAJV,CAKAC,eAAe,CAAC,SALhB,CAMCC,WAAW,CAAE,MANd,CAOLC,YAAY,CAAE,CAACzB,KAAK,CAAC,CAAP,CAASC,MAAM,CAAC,CAAhB,CAPT,CANmB,CAAlB,CAAf","sourcesContent":["import  React, {Component} from 'react';\r\nimport {View,Text,TextInput,StyleSheet,TouchableOpacity, Alert,Modal,KeyboardAvoidingView,ScrollView,Image} from 'react-native';\r\nimport {ListItem} from 'react-native-elements';\r\nimport firebase from 'firebase';\r\nimport {RFValue} from 'react-native-responsive-fontsize';\r\nimport db from '../config';\r\nimport MyHeader from '../components/MyHeader';\r\n\r\nexport default class BookDonateScreen extends Component{\r\n    constructor(){\r\n        super()\r\n            this.state={\r\n              userID:firebase.auth().currentUser.email,\r\n                requestedBookList:[],\r\n              \r\n            }\r\n        \r\n        this.requestRef=null\r\n    }\r\n  \r\n    getRequestedBooksList =()=>{\r\n        this.requestRef = db.collection(\"requested_books\")\r\n        .onSnapshot((snapshot)=>{\r\n          var requestedBooksList = snapshot.docs.map((doc) => doc.data());\r\n          this.setState({\r\n            requestedBooksList : requestedBooksList\r\n          });\r\n        })\r\n      }\r\n    \r\n      componentDidMount(){\r\n        this.getRequestedBooksList()\r\n      }\r\n    \r\n      componentWillUnmount(){\r\n        this.requestRef();\r\n      }\r\n\r\n    \r\n      keyExtractor = (item, index) => index.toString()\r\n    \r\n      renderItem = ( {item, i} ) =>{\r\n        return (\r\n          <ListItem\r\n            key={i}\r\n            title={item.book_name}\r\n            subtitle={item.reason_to_request}\r\n            titleStyle={{ color: 'black', fontWeight: 'bold' }}\r\n            leftElement={<Image style={{width:50,height:50}}\r\n                             source={{uri:item.image_link}} />}\r\n            rightElement={\r\n                <TouchableOpacity style={styles.button}\r\n                                   onPress={()=>{\r\n                                     this.props.navigation.navigate(\"ReceiverDetails\",{\"details\":item})\r\n                                   }}>\r\n                  <Text style={{color:'#ffff'}}>View</Text>\r\n                </TouchableOpacity>\r\n              }\r\n            bottomDivider\r\n          />\r\n        )\r\n      }\r\n    render(){\r\n        return(\r\n            <View style={{flex:1}}>\r\n              <MyHeader title='Donate Books' navigation={this.props.navigate}   />\r\n              <View style={{flex:1}}>\r\n                {this.state.requestedBookList.length === 0?\r\n                (<View style={styles.subContainer}>\r\n                                      <Text style={{fontSize:20}}>\r\n                                        List of all requested books\r\n                                        </Text>\r\n                                        </View>)\r\n                                        :\r\n                (<FlatList keyExtractor={this.keyExtractor}\r\n                          data={this.state.requestedBookList}\r\n                          renderItem={this.state.renderItem} />)\r\n                }\r\n              </View>\r\n                        \r\n            </View>\r\n        )\r\n    }\r\n}\r\nconst styles = StyleSheet.create({\r\n   subContainer:{ flex:1,\r\n     fontSize: 20,\r\n      justifyContent:'center',\r\n       alignItems:'center' \r\n      },\r\n       button:{\r\n          width:100,\r\n           height:30,\r\n            justifyContent:'center',\r\n             alignItems:'center',\r\n              backgroundColor:\"#ff5722\",\r\n               shadowColor: \"#000\",\r\n         shadowOffset: {width:0,height:8}\r\n               } \r\n              })"]},"metadata":{},"sourceType":"module"}