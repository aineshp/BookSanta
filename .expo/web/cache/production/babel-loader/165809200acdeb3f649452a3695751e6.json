{"ast":null,"code":"import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function _createSuper(Derived){return function(){var Super=_getPrototypeOf(Derived),result;if(_isNativeReflectConstruct()){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import React,{Component}from'react';import View from\"react-native-web/dist/exports/View\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import Image from\"react-native-web/dist/exports/Image\";import FlatList from\"react-native-web/dist/exports/FlatList\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import{ListItem}from'react-native-elements';import{RFValue}from'react-native-responsive-fontsize';import firebase from'firebase';import db from\"../config\";import MyHeader from\"../components/MyHeader\";var MyReceivedBooksScreen=function(_Component){_inherits(MyReceivedBooksScreen,_Component);var _super=_createSuper(MyReceivedBooksScreen);function MyReceivedBooksScreen(){var _this;_classCallCheck(this,MyReceivedBooksScreen);_this=_super.call(this);_this.getReceivedBooksList=function(){_this.requestRef=db.collection(\"requested_books\").where('user_id','==',_this.state.userID).where(\"book_status\",'==','received').onSnapshot(function(snapshot){var receivedBooksList=snapshot.docs.map(function(doc){return doc.data();});_this.setState({receivedBooksList:receivedBooksList});});};_this.keyExtractor=function(item,index){return index.toString();};_this.renderItem=function(_ref){var item=_ref.item,i=_ref.i;return React.createElement(ListItem,{key:i,title:item.book_name,subtitle:item.bookStatus,leftElement:React.createElement(Image,{style:styles.LiImage,source:{uri:item.image_link}}),titleStyle:styles.titlestyle,bottomDivider:true});};_this.state={userID:firebase.auth().currentUser.email,receivedBooksList:[]};_this.requestRef=null;return _this;}_createClass(MyReceivedBooksScreen,[{key:\"componentDidMount\",value:function componentDidMount(){this.getReceivedBooksList();}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.requestRef();}},{key:\"render\",value:function render(){return React.createElement(View,{style:{flex:1}},React.createElement(MyHeader,{title:\"Received Books\",navigation:this.props.navigation}),React.createElement(View,{style:{flex:1}},this.state.receivedBooksList.length===0?React.createElement(View,{style:styles.subContainer},React.createElement(Text,{style:{fontSize:20}},\"List Of All Received Books\")):React.createElement(FlatList,{keyExtractor:this.keyExtractor,data:this.state.receivedBooksList,renderItem:this.renderItem})));}}]);return MyReceivedBooksScreen;}(Component);export{MyReceivedBooksScreen as default};var styles=StyleSheet.create({subContainer:{flex:1,fontSize:20,justifyContent:'center',alignItems:'center'},button:{width:100,height:30,justifyContent:'center',alignItems:'center',backgroundColor:\"#ff5722\",shadowColor:\"#000\",shadowOffset:{width:0,height:8}},LiImage:{height:RFValue(50),width:RFValue(50)},titlestyle:{color:'black',fontWeight:'bold'}});","map":{"version":3,"sources":["C:/Users/aines/Desktop/book-santa-stage-11-master/screens/MyReceivedBooksScreen.js"],"names":["React","Component","ListItem","RFValue","firebase","db","MyHeader","MyReceivedBooksScreen","getReceivedBooksList","requestRef","collection","where","state","userID","onSnapshot","snapshot","receivedBooksList","docs","map","doc","data","setState","keyExtractor","item","index","toString","renderItem","i","book_name","bookStatus","styles","LiImage","uri","image_link","titlestyle","auth","currentUser","email","flex","props","navigation","length","subContainer","fontSize","StyleSheet","create","justifyContent","alignItems","button","width","height","backgroundColor","shadowColor","shadowOffset","color","fontWeight"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { View, StyleSheet, Text,Image, FlatList,TouchableOpacity } from 'react-native';\r\nimport { ListItem } from 'react-native-elements'\r\nimport {RFValue} from 'react-native-responsive-fontsize';\r\nimport firebase from 'firebase';\r\nimport db from '../config'\r\nimport MyHeader from '../components/MyHeader';\r\n\r\n\r\nexport default class MyReceivedBooksScreen extends Component{\r\n  constructor(){\r\n    super()\r\n    this.state = {\r\n      userID  : firebase.auth().currentUser.email,\r\n      receivedBooksList : []\r\n    }\r\n  this.requestRef= null\r\n  }\r\n\r\n  getReceivedBooksList =()=>{\r\n    this.requestRef = db.collection(\"requested_books\")\r\n    .where('user_id','==',this.state.userID)\r\n    .where(\"book_status\", '==','received')\r\n    .onSnapshot((snapshot)=>{\r\n      var receivedBooksList = snapshot.docs.map((doc) => doc.data())\r\n      this.setState({\r\n        receivedBooksList : receivedBooksList\r\n      });\r\n    })\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.getReceivedBooksList()\r\n  }\r\n\r\n  componentWillUnmount(){\r\n    this.requestRef();\r\n  }\r\n\r\n  keyExtractor = (item, index) => index.toString()\r\n\r\n  renderItem = ( {item, i} ) =>{\r\n    return (\r\n      <ListItem\r\n        key={i}\r\n        title={item.book_name}\r\n        subtitle={item.bookStatus}\r\n        leftElement={\r\n          <Image\r\n            style={styles.LiImage}\r\n            source={{\r\n              uri: item.image_link,\r\n            }}\r\n            />\r\n          }\r\n        titleStyle={styles.titlestyle}\r\n        bottomDivider\r\n      />\r\n    )\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <View style={{flex:1}}>\r\n        <MyHeader title=\"Received Books\" navigation ={this.props.navigation}/>\r\n        <View style={{flex:1}}>\r\n          {\r\n            this.state.receivedBooksList.length === 0\r\n            ?(\r\n              <View style={styles.subContainer}>\r\n                <Text style={{ fontSize: 20}}>List Of All Received Books</Text>\r\n              </View>\r\n            )\r\n            :(\r\n              <FlatList\r\n                keyExtractor={this.keyExtractor}\r\n                data={this.state.receivedBooksList}\r\n                renderItem={this.renderItem}\r\n              />\r\n            )\r\n          }\r\n        </View>\r\n      </View>\r\n    )\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  subContainer:{\r\n    flex:1,\r\n    fontSize: 20,\r\n    justifyContent:'center',\r\n    alignItems:'center'\r\n  },\r\n  button:{\r\n    width:100,\r\n    height:30,\r\n    justifyContent:'center',\r\n    alignItems:'center',\r\n    backgroundColor:\"#ff5722\",\r\n    shadowColor: \"#000\",\r\n    shadowOffset: {\r\n       width: 0,\r\n       height: 8\r\n     }\r\n  },\r\n  LiImage:{\r\n    height:RFValue(50),\r\n    width:RFValue(50)\r\n  },\r\n  titlestyle:\r\n  {\r\n  color: 'black',\r\n  fontWeight: 'bold'\r\n},\r\n\r\n})"]},"metadata":{},"sourceType":"module"}