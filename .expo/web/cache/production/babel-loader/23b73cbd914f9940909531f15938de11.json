{"ast":null,"code":"import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _assertThisInitialized from\"@babel/runtime/helpers/assertThisInitialized\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _createSuper(Derived){return function(){var Super=_getPrototypeOf(Derived),result;if(_isNativeReflectConstruct()){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import React from'react';import PropTypes from'prop-types';import TouchableHighlight from\"react-native-web/dist/exports/TouchableHighlight\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Text from\"react-native-web/dist/exports/Text\";import View from\"react-native-web/dist/exports/View\";import Dimensions from\"react-native-web/dist/exports/Dimensions\";import FlatList from\"react-native-web/dist/exports/FlatList\";import TextInput from\"react-native-web/dist/exports/TextInput\";import BookSearch from\"./BookSearch\";var _Dimensions$get=Dimensions.get('screen'),height=_Dimensions$get.height,width=_Dimensions$get.width;var GoogleBookSearch=function(_React$Component){_inherits(GoogleBookSearch,_React$Component);var _super=_createSuper(GoogleBookSearch);function GoogleBookSearch(props){var _this;_classCallCheck(this,GoogleBookSearch);_this=_super.call(this,props);_this.state={gbooks:[],typing:false,typingTimeout:0,showcontainer:true,searchval:_this.props.value};_this.searchBook=_this.searchBook.bind(_assertThisInitialized(_this));_this.onTextChange=_this.onTextChange.bind(_assertThisInitialized(_this));_this.onResultPress=_this.onResultPress.bind(_assertThisInitialized(_this));_this.searchResult=_this.searchResult.bind(_assertThisInitialized(_this));return _this;}_createClass(GoogleBookSearch,[{key:\"renderGBooks\",value:function renderGBooks(item,index){var _this2=this;var book=item;var name=item.volumeInfo.title;var thumbnail={small:\"\",normal:\"\"};if(book.volumeInfo!=undefined&&book.volumeInfo.imageLinks!=undefined){thumbnail.small=book.volumeInfo.imageLinks.smallThumbnail!=undefined?book.volumeInfo.imageLinks.smallThumbnail:null;thumbnail.normal=book.volumeInfo.imageLinks.thumbnail!=undefined?book.volumeInfo.imageLinks.thumbnail:null;}var obj={id:item.id,title:name,authors:item.volumeInfo.authors,isbn:item.volumeInfo.industryIdentifiers,raw:item,smallThumbnail:thumbnail.small,thumbnail:thumbnail.normal};return React.createElement(TouchableHighlight,{onPress:function onPress(){return _this2.onResultPress(obj);},underlayColor:'transparent'},React.createElement(View,{style:[styles.resultItem,_objectSpread({},this.props.resultContainerStyle)]},React.createElement(Text,{style:_objectSpread({},this.props.resultItemStyle)},obj.title)));}},{key:\"onResultPress\",value:function onResultPress(book){if(this.props.onResultPress!==undefined){this.setState({showcontainer:false,searchval:book.title});this.props.onResultPress(book);}}},{key:\"searchResult\",value:function searchResult(){if(this.props.searchResult!==undefined){this.props.searchResult(this.state.gbooks);}}},{key:\"onTextChange\",value:function onTextChange(val){this.setState({searchval:val});if(val.length==0){this.setState({showcontainer:false});}if(val.length>2){if(!this.state.showcontainer){this.setState({showcontainer:true});}var self=this;if(self.state.typingTimeout){clearTimeout(self.state.typingTimeout);}self.setState({typing:false,typingTimeout:setTimeout(function(){self.searchBook(val);},self.props.interval)});}}},{key:\"searchBook\",value:function searchBook(val){var self,res,booksArray,sliced;return _regeneratorRuntime.async(function searchBook$(_context){while(1){switch(_context.prev=_context.next){case 0:self=this;if(!(val.length>2)){_context.next=6;break;}_context.next=4;return _regeneratorRuntime.awrap(BookSearch.searchbook(val,this.props.apikey));case 4:res=_context.sent;if(res.status&&res.data!=undefined){console.log(res.data);booksArray=res.data;if(self.props.limit!=-1){if(booksArray.length>self.props.limit){sliced=booksArray.slice(0,self.props.limit);booksArray=sliced;}}this.setState({gbooks:booksArray},function(){self.searchResult();});}case 6:case\"end\":return _context.stop();}}},null,this,null,Promise);}},{key:\"render\",value:function render(){var _this3=this;return React.createElement(View,{style:[styles.container,_objectSpread({},this.props.searchContainerStyle)]},React.createElement(TextInput,{value:this.state.searchval,style:[styles.input,_objectSpread({},this.props.searchInputStyle)],placeholder:this.props.placeholder,clearButtonMode:'while-editing',onChangeText:function onChangeText(text){return _this3.onTextChange(text);}}),this.props.showSearchResult&&this.state.showcontainer?React.createElement(View,{style:styles.resultContainer},React.createElement(FlatList,{keyboardDismissMode:'on-drag',renderItem:function renderItem(item){return _this3.renderGBooks(item.item,item.index);},data:this.state.gbooks,keyExtractor:function keyExtractor(item,index){return index.toString();}})):React.createElement(View,null));}}]);return GoogleBookSearch;}(React.Component);GoogleBookSearch.propTypes={apikey:PropTypes.string,placeholder:PropTypes.string,limit:PropTypes.number,onTextChange:PropTypes.func,searchContainerStyle:PropTypes.object,searchInputStyle:PropTypes.object,resultContainerStyle:PropTypes.object,resultItemStyle:PropTypes.object,showSearchResult:PropTypes.bool,searchResult:PropTypes.func,onResultPress:PropTypes.func,keyboardType:PropTypes.string,returnKeyType:PropTypes.string,onSubmitEditing:PropTypes.func,value:PropTypes.string,interval:PropTypes.number};GoogleBookSearch.defaultProps={apikey:\"\",theme:'light',placeholder:\"Search\",keyboardType:'default',returnKeyType:'done',value:\"\",limit:-1,showSearchResult:true,interval:800};export{GoogleBookSearch as default};var styles=StyleSheet.create({container:{zIndex:10,overflow:'visible',marginTop:24,borderTopWidth:0,borderBottomWidth:0,height:50,width:width-16,alignSelf:'center',backgroundColor:\"#fff\",borderColor:\"#f6f6f6\",borderWidth:0.7,borderRadius:5,shadowOpacity:0.0015*5+0.18,shadowRadius:0.54*5,shadowOffset:{height:0.6*5},justifyContent:'center'},input:{backgroundColor:'transparent',fontSize:15,lineHeight:22.5,paddingBottom:0,paddingHorizontal:8,flex:1},resultContainer:{position:'absolute',top:60,left:8,right:8,backgroundColor:'#FFF',borderRadius:5,flex:1,elevation:3,zIndex:10,shadowOpacity:0.0015*5+0.18,shadowRadius:0.54*5,shadowOffset:{height:0.6*5}},resultItem:{height:50,paddingHorizontal:8,paddingVertical:4,justifyContent:'center',borderBottomWidth:0.8,borderBottomColor:\"#f6f6f6\",margin:2},resultText:{fontWeight:'300',alignSelf:'center'}});","map":{"version":3,"sources":["C:/Users/aines/Desktop/book-santa-stage-11-master/node_modules/react-native-google-books/GoogleBookSearch.js"],"names":["React","PropTypes","BookSearch","Dimensions","get","height","width","GoogleBookSearch","props","state","gbooks","typing","typingTimeout","showcontainer","searchval","value","searchBook","bind","onTextChange","onResultPress","searchResult","item","index","book","name","volumeInfo","title","thumbnail","small","normal","undefined","imageLinks","smallThumbnail","obj","id","authors","isbn","industryIdentifiers","raw","styles","resultItem","resultContainerStyle","resultItemStyle","setState","val","length","self","clearTimeout","setTimeout","interval","searchbook","apikey","res","status","data","console","log","booksArray","limit","sliced","slice","container","searchContainerStyle","input","searchInputStyle","placeholder","text","showSearchResult","resultContainer","renderGBooks","toString","Component","propTypes","string","number","func","object","bool","keyboardType","returnKeyType","onSubmitEditing","defaultProps","theme","StyleSheet","create","zIndex","overflow","marginTop","borderTopWidth","borderBottomWidth","alignSelf","backgroundColor","borderColor","borderWidth","borderRadius","shadowOpacity","shadowRadius","shadowOffset","justifyContent","fontSize","lineHeight","paddingBottom","paddingHorizontal","flex","position","top","left","right","elevation","paddingVertical","borderBottomColor","margin","resultText","fontWeight"],"mappings":"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","sourcesContent":["/*\n * @Author: Anooj Krishnan G \n * @Date: 2019-05-17 19:40:13 \n * @Last Modified by: Anooj Krishnan G\n * @Last Modified time: 2019-11-13 23:05:58\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types'\nimport {TouchableHighlight, StyleSheet, Text, View, Dimensions, FlatList, TextInput} from 'react-native';\nimport BookSearch from './BookSearch'\n\nconst {height, width} = Dimensions.get('screen');\n\nexport default class GoogleBookSearch extends React.Component{\n   static propTypes = {        \n       apikey: PropTypes.string,   \n       placeholder:PropTypes.string, \n       limit:PropTypes.number,    \n       onTextChange: PropTypes.func,\n       searchContainerStyle:PropTypes.object,\n       searchInputStyle:PropTypes.object,\n       resultContainerStyle:PropTypes.object,\n       resultItemStyle:PropTypes.object,\n       showSearchResult:PropTypes.bool,\n       searchResult:PropTypes.func,\n       onResultPress:PropTypes.func,\n       keyboardType:PropTypes.string,\n       returnKeyType:PropTypes.string,        \n       onSubmitEditing:PropTypes.func,        \n       value:PropTypes.string,\n       interval:PropTypes.number\n   };\n   static defaultProps = {        \n       apikey: \"\",        \n       theme:'light', \n       placeholder:\"Search\",\n       keyboardType:'default',\n       returnKeyType:'done',        \n       value:\"\",\n       limit:-1,\n       showSearchResult:true,\n       interval:800\n   };\n\n   constructor(props) {\n       super(props);    \n       this.state={\n           gbooks:[],\n           typing: false,\n            typingTimeout: 0,\n            showcontainer:true,\n            searchval:this.props.value\n       } \n       this.searchBook = this.searchBook.bind(this);       \n       this.onTextChange = this.onTextChange.bind(this); \n       this.onResultPress = this.onResultPress.bind(this);\n       this.searchResult = this.searchResult.bind(this);\n   }\n\n   renderGBooks(item, index){\n       let book = item;\n       let name = item.volumeInfo.title\n       var thumbnail = {\n            small:\"\",\n            normal:\"\"\n        }\n        if(book.volumeInfo != undefined \n            && book.volumeInfo.imageLinks != undefined){\n               thumbnail.small = book.volumeInfo.imageLinks.smallThumbnail!=undefined?book.volumeInfo.imageLinks.smallThumbnail:null;\n               thumbnail.normal = book.volumeInfo.imageLinks.thumbnail!=undefined?book.volumeInfo.imageLinks.thumbnail:null;\n        }\n       let obj = {\n           id:item.id,\n           title:name,\n           authors:item.volumeInfo.authors,\n           isbn:item.volumeInfo.industryIdentifiers,\n           raw:item,\n           smallThumbnail:thumbnail.small,\n           thumbnail:thumbnail.normal\n       }\n       return(\n           <TouchableHighlight \n                onPress={()=>this.onResultPress(obj)}\n                underlayColor={'transparent'}\n                >\n                <View style={[styles.resultItem,{...this.props.resultContainerStyle}]}>\n                    <Text style={{...this.props.resultItemStyle}}>{obj.title}</Text>\n                </View>\n                \n           </TouchableHighlight>\n       )\n   }\n\n   onResultPress(book){\n        if (this.props.onResultPress !== undefined) {\n            this.setState({showcontainer:false,searchval:book.title})\n            this.props.onResultPress(book)\n        }\n   }\n\n   searchResult(){\n    if (this.props.searchResult !== undefined) {\n        this.props.searchResult(this.state.gbooks)\n    }\n   }\n\n   onTextChange(val){       \n       this.setState({searchval:val})\n       if(val.length == 0){\n        this.setState({showcontainer:false})\n       }\n        if(val.length > 2){\n            if(!this.state.showcontainer){\n                this.setState({showcontainer:true})\n            }\n            const self = this;\n\n            if (self.state.typingTimeout) {\n                clearTimeout(self.state.typingTimeout);\n            }\n            self.setState({                \n                typing: false,\n                typingTimeout: setTimeout(function () {\n                    self.searchBook(val);\n                }, self.props.interval)\n            });\n        }\n   }\n\n   async searchBook(val){\n        let self = this;\n        if(val.length > 2){            \n            let res = await BookSearch.searchbook(val, this.props.apikey);                   \n            if(res.status \n                && res.data != undefined){\n                    console.log(res.data)\n                    var booksArray = res.data;\n                    if(self.props.limit != -1){\n                        if(booksArray.length > self.props.limit){\n                            let sliced = booksArray.slice(0,self.props.limit)\n                            booksArray = sliced;\n                        }\n                    }\n                    this.setState({gbooks:booksArray},()=>{\n                        self.searchResult()\n                    })\n            }\n        }\n        \n   }\n\n   render(){\n        return(\n            <View \n                style={[styles.container,{...this.props.searchContainerStyle}]}>\n                \n                <TextInput\n                    value={this.state.searchval}\n                    style={[styles.input,{...this.props.searchInputStyle}]}\n                    placeholder={this.props.placeholder}\n                    clearButtonMode={'while-editing'}\n                    onChangeText={(text) => this.onTextChange(text)}\n                 />\n                 {\n                     (this.props.showSearchResult && this.state.showcontainer)?\n                    <View style={styles.resultContainer}>\n                        <FlatList\n                            keyboardDismissMode={'on-drag'}\n                            renderItem={(item) => this.renderGBooks(item.item, item.index)}\n                            data={this.state.gbooks}                                                \n                            keyExtractor={(item, index) => index.toString()}\n                        />\n                    </View>:<View />\n                 }\n\n            </View>\n        )\n   }\n   \n\n}\n\nconst styles = StyleSheet.create({\n    container:{\n        zIndex: 10,\n        overflow: 'visible',\n        marginTop:24,        \n        borderTopWidth: 0,\n        borderBottomWidth: 0,\n        height: 50,        \n        width:width-16,\n        alignSelf:'center',\n        backgroundColor: \"#fff\",\n        borderColor:\"#f6f6f6\",\n        borderWidth:0.7,\n        borderRadius:5,\n        shadowOpacity: 0.0015 * 5 + 0.18,\n        shadowRadius: 0.54 * 5,\n        shadowOffset: {\n            height: 0.6 * 5,\n        },\n        justifyContent:'center'\n    },\n    input:{\n        backgroundColor: 'transparent',\n        fontSize: 15,\n        lineHeight: 22.5,\n        paddingBottom: 0,\n        paddingHorizontal:8,\n        flex: 1\n    },\n    resultContainer:{\n        position: 'absolute',\n        top: 60,\n        left: 8,\n        right: 8,\n        backgroundColor: '#FFF',\n        borderRadius: 5,\n        flex: 1,\n        elevation: 3,\n        zIndex: 10,\n        shadowOpacity: 0.0015 * 5 + 0.18,\n        shadowRadius: 0.54 * 5,\n        shadowOffset: {\n            height: 0.6 * 5,\n        },\n        \n    },\n    resultItem:{\n        height:50,\n        paddingHorizontal:8, \n        paddingVertical:4,\n        justifyContent:'center',\n        borderBottomWidth:0.8,\n        borderBottomColor:\"#f6f6f6\",\n        margin:2\n              \n    },\n    resultText:{\n        fontWeight:'300',\n        alignSelf:'center'\n        \n    }\n})"]},"metadata":{},"sourceType":"module"}