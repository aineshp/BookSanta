{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\aines\\\\Desktop\\\\book-santa-stage-11-master\\\\components\\\\CustomSideBarMenu.js\";\n\nfunction _createSuper(Derived) { return function () { var Super = _getPrototypeOf(Derived), result; if (_isNativeReflectConstruct()) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { DrawerItems } from 'react-navigation-drawer';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport firebase from 'firebase';\nimport { Avatar } from 'react-native-elements';\nimport * as ImagePicker from \"expo-image-picker\";\n\nvar CustomSideBarMenu = function (_Component) {\n  _inherits(CustomSideBarMenu, _Component);\n\n  var _super = _createSuper(CustomSideBarMenu);\n\n  function CustomSideBarMenu() {\n    var _this;\n\n    _classCallCheck(this, CustomSideBarMenu);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      userID: firebase.auth().currentUser.email,\n      image: '#',\n      name: '',\n      docID: ''\n    };\n\n    _this.selectPicture = function _callee() {\n      var _await$ImagePicker$la, cancelled, uri;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n                mediaTypes: ImagePicker.MediaTypeOptions.All,\n                allowsEditing: true,\n                aspect: [4, 3],\n                quality: 1\n              }));\n\n            case 2:\n              _await$ImagePicker$la = _context.sent;\n              cancelled = _await$ImagePicker$la.cancelled;\n              uri = _await$ImagePicker$la.uri;\n\n              if (!cancelled) {\n                _this.uploadImage(uri, _this.state.userID);\n\n                _this.setState({\n                  image: uri\n                });\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.uploadImage = function _callee2(uri, imageName) {\n      var response, blob, ref;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(fetch(uri));\n\n            case 2:\n              response = _context2.sent;\n              _context2.next = 5;\n              return _regeneratorRuntime.awrap(response.blob());\n\n            case 5:\n              blob = _context2.sent;\n              ref = firebase.storage().ref().child('user_profile/' + imageName);\n              return _context2.abrupt(\"return\", ref.put(blob).then(function (response) {\n                _this.fetchImage(imageName);\n              }));\n\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.fetchImage = function (imageName) {\n      var storageRef = firebase.storage().ref().child('user_profile/' + imageName);\n      storageRef.getDownloadURL().then(function (URL) {\n        _this.setState({\n          image: url\n        });\n      }).catch(function (error) {\n        _this.setState({\n          image: '#'\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(CustomSideBarMenu, [{\n    key: \"getUserProfile\",\n    value: function getUserProfile() {\n      var _this2 = this;\n\n      db.collection('User').where('emailID', '==', this.state.user_id).onSnapshot(function (querySnapshot) {\n        querySnapshot.forEach(function (doc) {\n          _this2.setState({\n            name: doc.data().first_name + '' + doc.data().last_name\n          });\n        });\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchName(this.state.userID);\n      this.state.getUserProfile();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 0.5,\n          alignItems: 'center',\n          backgroundColor: 'orange'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 17\n        }\n      }, React.createElement(Avatar, {\n        rounded: true,\n        source: {\n          uri: this.state.image\n        },\n        size: \"medium\",\n        onPress: function onPress() {\n          _this3.selectPicture();\n        },\n        containerStyle: styles.imageContainer,\n        showEditButton: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }\n      }), React.createElement(Text, {\n        style: {\n          fontWeight: '100',\n          fontSize: 20,\n          paddingTop: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }\n      }, this.state.name, \" \")), React.createElement(View, {\n        style: styles.drawerItemsContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 17\n        }\n      }, React.createElement(DrawerItems, _extends({}, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }\n      }))), React.createElement(View, {\n        style: styles.logoutContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 16\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: styles.logoutButton,\n        onPress: function onPress() {\n          _this3.props.navigation.navigate('WelcomeScreen');\n\n          firebase.auth().signOut();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 20\n        }\n      }, React.createElement(Text, {\n        style: styles.logOutText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 29\n        }\n      }, \"Logout\"))));\n    }\n  }]);\n\n  return CustomSideBarMenu;\n}(Component);\n\nexport { CustomSideBarMenu as default };\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  drawerItemsContainer: {\n    flex: 0.8,\n    marginTop: 50\n  },\n  logOutContainer: {\n    flex: 0.2,\n    justifyContent: 'flex-end',\n    paddingBottom: 100,\n    marginLeft: 50\n  },\n  logoutButton: {\n    height: 60,\n    width: 200,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginLeft: 40,\n    borderWidth: 1.5,\n    borderRadius: 50\n  },\n  logOutText: {\n    fontSize: 30,\n    fontWeight: 'bold'\n  }\n});","map":{"version":3,"sources":["C:/Users/aines/Desktop/book-santa-stage-11-master/components/CustomSideBarMenu.js"],"names":["React","Component","DrawerItems","firebase","Avatar","ImagePicker","CustomSideBarMenu","state","userID","auth","currentUser","email","image","name","docID","selectPicture","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","allowsEditing","aspect","quality","cancelled","uri","uploadImage","setState","imageName","fetch","response","blob","ref","storage","child","put","then","fetchImage","storageRef","getDownloadURL","URL","url","catch","error","db","collection","where","user_id","onSnapshot","querySnapshot","forEach","doc","data","first_name","last_name","fetchName","getUserProfile","flex","alignItems","backgroundColor","styles","imageContainer","fontWeight","fontSize","paddingTop","drawerItemsContainer","props","logoutContainer","logoutButton","navigation","navigate","signOut","logOutText","StyleSheet","create","container","marginTop","logOutContainer","justifyContent","paddingBottom","marginLeft","height","width","borderWidth","borderRadius"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\r\nimport {DrawerItems } from 'react-navigation-drawer'\r\nimport {View,Text,StyleSheet,TouchableOpacity} from 'react-native';\r\nimport firebase from 'firebase';\r\nimport {Avatar} from 'react-native-elements';\r\nimport * as ImagePicker from \"expo-image-picker\";\r\nexport default class CustomSideBarMenu extends Component{\r\n    state={\r\n        userID:firebase.auth().currentUser.email,\r\n        image:'#',\r\n        name:'',\r\n        docID:'',\r\n    }\r\n    selectPicture = async ()=>{\r\n          const{cancelled,uri}=await ImagePicker.launchImageLibraryAsync({\r\n            mediaTypes: ImagePicker.MediaTypeOptions.All,\r\n            allowsEditing: true,\r\n            aspect: [4, 3],\r\n            quality: 1,\r\n          })\r\n          if(!cancelled){\r\n              this.uploadImage(uri,this.state.userID);\r\n              this.setState({\r\n                  image:uri\r\n              })\r\n          }\r\n    }\r\n\r\n    uploadImage = async(uri,imageName)=>{\r\n    var response = await fetch(uri);\r\n    var blob = await response.blob();\r\n    var ref = firebase\r\n    .storage()\r\n    .ref()\r\n    .child('user_profile/' + imageName);\r\n    \r\n            return ref.put(blob).then( (response) => {\r\n                    this.fetchImage(imageName);\r\n                });\r\n    \r\n    }\r\n\r\n    fetchImage= (imageName)=>{\r\n        var storageRef = firebase\r\n        .storage()\r\n        .ref()\r\n        .child('user_profile/'+ imageName);\r\n\r\n            storageRef\r\n            .getDownloadURL()\r\n            .then((URL)=>{\r\n                this.setState({ image:url })\r\n            })\r\n            .catch((error)=>{\r\n                this.setState({image:'#'})\r\n            })\r\n    }\r\n    getUserProfile(){\r\n        db.collection('User').where('emailID','==', this.state.user_id)\r\n        .onSnapshot((querySnapshot)=>{\r\n            querySnapshot.forEach((doc)=>{\r\n                this.setState({name:doc.data().first_name+''+doc.data().last_name})\r\n            })\r\n        })\r\n    }\r\n    componentDidMount(){\r\n        this.fetchName(this.state.userID);\r\n        this.state.getUserProfile();\r\n    }\r\n    render(){\r\n        return(\r\n            <View style={{flex:1}}>\r\n                <View style={{flex:0.5,alignItems:'center',backgroundColor:'orange'}}>\r\n                    <Avatar rounded source={{\r\n                        uri:this.state.image\r\n                    }} \r\n                    size='medium' \r\n                    onPress={()=>{ this.selectPicture() }} \r\n                    containerStyle={styles.imageContainer}\r\n                    showEditButton/>\r\n                    <Text style={{fontWeight:'100',fontSize:20,paddingTop:20 }}>{this.state.name} </Text>\r\n                </View>\r\n                <View style={styles.drawerItemsContainer}>\r\n                    <DrawerItems {...this.props}/>\r\n                </View>\r\n               <View style={styles.logoutContainer}>\r\n                   <TouchableOpacity style={styles.logoutButton}\r\n                                     onPress={()=>{\r\n                                         this.props.navigation.navigate('WelcomeScreen')\r\n                                         firebase.auth().signOut()\r\n                    }}>\r\n                            <Text style={styles.logOutText}>Logout</Text>\r\n                  </TouchableOpacity>\r\n                   </View> \r\n            </View>\r\n        )\r\n    }\r\n}\r\nvar styles = StyleSheet.create({ \r\n    container : { flex:1 },\r\n     drawerItemsContainer:{ flex:0.8,  marginTop:50 },\r\n      logOutContainer : { flex:0.2,\r\n         justifyContent:'flex-end',\r\n          paddingBottom:100,\r\n          marginLeft:50,\r\n         },\r\n           logoutButton : { \r\n               height:60,\r\n              width:200,\r\n              justifyContent:'center',\r\n              alignItems:'center', \r\n              marginLeft:40,\r\n              borderWidth:1.5,\r\n              borderRadius:50,\r\n              \r\n            },\r\n               logOutText:{ fontSize: 30,\r\n                 fontWeight:'bold' \r\n                } \r\n            })\r\n"]},"metadata":{},"sourceType":"module"}